# Maintainer: wintersnowgod <git.xerox732@passinbox.com>
pkgname=looking-glass-module-dkms-setup
epoch=2
pkgver=B6
pkgrel=10
pkgdesc="Automated rules for looking-glass-module-dkms."
arch=('x86_64')
url="https://looking-glass.io/docs/B6/module/#kernel-module"
license=('GPL')
depends=('looking-glass-module-dkms')
source=("10-looking-glass.conf"
        "kvmfr.conf"
        "kvmfr-modprobe.conf"
        "99-kvmfr.rules"
        "libvirt-qemu")
sha256sums=('2daadd147aeff6b5905c0057867433a1da355ca44f68f7cbe2cc8759e5c987a8'
            '10865542e2f3812d78b6cf2a54c055feec885a1d6749a790674b53caf40b28eb'
            '52316ce8844a4622907a9199aa8eafdbbb8f6938db118af5959cefb4be54f30a'
            '6bc9e4d61716204e26c36ec200f00285243b082b1db44f249e3c259223ea7cda'
            '15e99ace35b12e6513b289cb30384e348589c9f60a1b5a200ebaf210a797e955')
backup=('etc/udev/rules.d/99-kvmfr.rules'
        'etc/tmpfiles.d/10-looking-glass.conf')
install=${pkgname}.install

package() {
  install -Dm644 "${srcdir}/10-looking-glass.conf" "${pkgdir}/etc/tmpfiles.d/10-looking-glass.conf"
  install -Dm644 "${srcdir}/kvmfr.conf" "${pkgdir}/etc/modules-load.d/kvmfr.conf"
  install -Dm644 "${srcdir}/kvmfr-modprobe.conf" "${pkgdir}/etc/modprobe.d/kvmfr.conf"
  install -Dm644 "${srcdir}/99-kvmfr.rules" "${pkgdir}/etc/udev/rules.d/99-kvmfr.rules"
  install -Dm644 "${srcdir}/libvirt-qemu" "${pkgdir}/etc/apparmor.d/local/abstractions/libvirt-qemu"
}
