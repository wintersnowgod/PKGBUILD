# Maintainer: wintersnowgod <git.xerox732@passinbox.com>
pkgname=cosmic-ext-applet-netspeed-git
_pkgname=cosmic-ext-applet-netspeed
pkgdesc='Network speed monitoring applet designed for the COSMIC desktop environment.'
pkgver=r1.1f46551
pkgrel=1
arch=(x86_64)
url="https://github.com/khanra17/cosmic-ext-applet-netspeed"
depends=('gcc-libs' 'libxkbcommon' 'glibc' 'hicolor-icon-theme')
makedepends=('cargo' 'git' 'just')
license=('GPL-3.0-only')
source=("git+${url}.git")
sha256sums=('SKIP')

pkgver() {
  cd "$_pkgname"
  printf "r%s.%s" "$(git rev-list --count HEAD)" "$(git rev-parse --short HEAD)"
}

build() {
    cd "${_pkgname}"
    just build-release
}

package() {
    install -Dm755 "${srcdir}/${_pkgname}/target/release/cosmic-ext-applet-netspeed" "${pkgdir}/usr/bin/cosmic-ext-applet-netspeed"
    install -Dm755 "${srcdir}/${_pkgname}/res/desktop_entry.desktop" "${pkgdir}/usr/share/applications/io.github.khanra17.cosmic-ext-applet-netspeed.desktop"
    install -Dm644 "${srcdir}/${_pkgname}/res/app_icon.svg" "${pkgdir}/usr/share/icons/hicolor/scalable/apps/io.github.khanra17.cosmic-ext-applet-netspeed-symbolic.svg"
}
